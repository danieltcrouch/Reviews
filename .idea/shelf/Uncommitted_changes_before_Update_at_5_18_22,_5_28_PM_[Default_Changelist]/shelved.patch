Index: src/php/enter.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\ninclude_once( \"utility.php\" );\ninclude_once( \"utilityBook.php\" );\ninclude_once( \"utilityMovie.php\" );\n\n\n/*******************MOVIES*******************/\n\n\nfunction getGenres()\n{\n    return getGenresFromFile();\n}\n\nfunction getGenre( $list )\n{\n    return getMovieListFromFile( getPath( \"genre-$list.csv\" ) );\n}\n\nfunction getFranchise( $list )\n{\n    return getMovieListFromFile( getPath( \"franchise-$list.csv\" ) );\n}\n\n\n/*****************MOVIE SUBMIT*******************/\n\n\nfunction saveMovie( $id, $title, $year, $index, $rating, $review, $overwrite )\n{\n    $fileName = getPath( \"ratings.csv\" );\n    $isOverwrite = filter_var( $overwrite, FILTER_VALIDATE_BOOLEAN );\n    $movie = [\n        'title'     => $title,\n        'id'        => $id,\n        'year'      => $year,\n        'rating'    => $rating,\n        'review'    => $review\n    ];\n\n    $movies = getMovieList();\n\n    if ( $isOverwrite )\n    {\n        $originalIndex = getIndexFromListById( $movies, $id );\n        unset( $movies[$originalIndex] );\n    }\n\n    if ( $index )\n    {\n        $index *= -1; //this allows for more intuitive indexing--matching the displayed numbers on the index page\n        $count = count( $movies );\n        $index = $index > 0 ? $index - 1 : $count + $index + 1;\n        array_splice( $movies, $index, 0, array( $movie ) );\n    }\n    else\n    {\n        array_push( $movies, $movie );\n    }\n\n    saveFullMoviesToFile( $movies );\n    archive( $fileName );\n}\n\n\n/******************RANK SUBMIT*******************/\n\n\nfunction saveRankedMovies( $type, $list, $movies )\n{\n    saveRankMoviesToFile( $type, $list, $movies );\n}\n\nfunction saveRankedMovie( $type, $list, $rank, $id, $title, $year, $image, $review )\n{\n    $movie = [\n        'title'     => $title,\n        'id'        => $id,\n        'year'      => $year,\n        'image'     => $image,\n        'review'    => $review\n    ];\n\n    $movies = getMovieListFromFile( getPath( \"$type-$list.csv\" ) );\n    $index = getIndexFromListById( $movies, $id );\n    $movies[ $index ] = $movie;\n\n    saveRankMoviesToFile( $type, $list, $movies );\n}\n\n//ARCHIVED\n//function validateRank( $list, $rank, $currentRank )\n//{\n//    $isOverwrite = is_numeric( $currentRank );\n//    $currentRank = $isOverwrite ? (int)$currentRank : null;\n//    $result['isSuccess'] = false;\n//\n//    $list = getRankListId( $list );\n//    $movies = getMovieListFromFile( getPath( \"rank-$list.csv\" ) );\n//    $count = count( $movies );\n//\n//    $rank = strtolower( $rank );\n//    if ( is_numeric( $rank ) )\n//    {\n//        $result['rank'] = (int)$rank;\n//    }\n//    else\n//    {\n//        switch ( $rank )\n//        {\n//            case \"top\":\n//            case \"start\":\n//            case \"first\":\n//                $result['rank'] = 1;\n//                break;\n//            case \"second\":\n//                $result['rank'] = 2;\n//                break;\n//            case \"third\":\n//                $result['rank'] = 3;\n//                break;\n//            case \"fourth\":\n//                $result['rank'] = 4;\n//                break;\n//            case \"fifth\":\n//                $result['rank'] = 5;\n//                break;\n//            case \"last\":\n//            case \"bottom\":\n//            case \"end\":\n//                $result['rank'] = $count;\n//                break;\n//        }\n//\n//        if ( stripos( $rank, \"before\" ) === 0 || stripos( $rank, \"after\" ) === 0 ||\n//             stripos( $rank, \"above\" )  === 0 || stripos( $rank, \"below\" ) === 0 )\n//        {\n//            $title = explode( ' ', $rank, 2 )[1];\n//            $titleIndex = getIndexFromListByTitle( $movies, $title ) + 1;\n//            $result['tIndex'] = $titleIndex;\n//            $result['cIndex'] = $currentRank;\n//            if ( is_numeric( $titleIndex ) )\n//            {\n//                if ( $isOverwrite && $titleIndex > $currentRank ) //current index is higher on list than given title\n//                {\n//                    $titleIndex--;\n//                }\n//                $result['tIndexSlide'] = $titleIndex;\n//                $atPosition = stripos( $rank, \"before\" ) === 0 || stripos( $rank, \"above\" ) === 0;\n//                $result['rank'] = $atPosition ? $titleIndex : $titleIndex + 1;\n//            }\n//        }\n//    }\n//\n//    $max = $isOverwrite ? $count : $count + 1;\n//    if ( is_numeric($result['rank']) && $result['rank'] <= $max && $result['rank'] >= 0 )\n//    {\n//        $result['isSuccess'] = true;\n//    }\n//    else\n//    {\n//        $result['message'] = \"Invalid Rank\";\n//    }\n//\n//    return $result;\n//}\n\n\n/*********************DELETE********************/\n\n\nfunction deleteMovie( $id )\n{\n    $movies = getMovieList();\n    $index = getIndexFromListById( $movies, $id );\n    $result['isSuccess'] = $index !== null;\n    if ( $result['isSuccess'] )\n    {\n        unset( $movies[$index] );\n        saveFullMoviesToFile( $movies );\n    }\n    return $result;\n}\n\nfunction deleteRankMovie( $type, $list, $id )\n{\n    $movies = getMovieListFromFile( getPath( \"$type-$list.csv\" ) );\n    $index = getIndexFromListById( $movies, $id );\n    $result['isSuccess'] = $index !== null;\n    if ( $result['isSuccess'] )\n    {\n        unset( $movies[$index] );\n        saveRankMoviesToFile( $type, $list, $movies );\n    }\n    return $result;\n}\n\n\n/**********************IMAGE*********************/\n\n\nfunction submitBookImage( $id, $url )\n{\n    $file = fopen( getPath( \"book-images.csv\" ), \"a\" );\n    fputcsv( $file, array( $id, $url ) );\n    fclose( $file );\n}\n\n\n/********************DOWNLOAD********************/\n\n\nfunction downloadAll()\n{\n    if ( extension_loaded('zip') )\n    {\n        $zipName = archiveFolder( time() . \"\", \"../archive\" );\n        if ( file_exists( $zipName ) )\n        {\n            ignore_user_abort(true);\n            header( \"Content-type: application/zip\" );\n            header( \"Content-Length: \" . filesize($zipName) );\n            header( \"Content-Disposition: attachment; filename='$zipName'\" );\n            readfile( $zipName );\n            unlink( $zipName );\n        }\n    }\n    else\n    {\n        echo \"ZIP Extension not available\";\n    }\n}\n\nfunction viewSearches()\n{\n    $result = \"\";\n    $file = fopen( getPath( \"searches.txt\" ), \"r\" );\n    while ( ($line = fgets( $file )) !== false )\n    {\n        $result .= \"<div>$line</div>\";\n    }\n    fclose( $file );\n    return $result;\n}\n\n\n/*********************************************************************************************************************/\n\n\nif ( isset( $_POST['action'] ) && function_exists( $_POST['action'] ) )\n{\n\t$action = $_POST['action'];\n    $result = null;\n\n    //saveMovie\n    if ( isset( $_POST['id'] ) && isset( $_POST['title'] ) && isset( $_POST['year'] ) && isset( $_POST['index'] ) && isset( $_POST['rating'] ) && isset( $_POST['review'] ) )\n    {\n        $result = $action( $_POST['id'], $_POST['title'], $_POST['year'], $_POST['index'], $_POST['rating'], $_POST['review'], isset( $_POST['overwrite'] ) ? $_POST['overwrite'] : false );\n    }\n    //saveRankedMovie\n\telseif ( isset( $_POST['type'] ) && isset( $_POST['list'] ) && isset( $_POST['rank'] ) && isset( $_POST['id'] ) && isset( $_POST['title'] ) && isset( $_POST['year'] ) && isset( $_POST['image'] ) && isset( $_POST['review'] ) )\n    {\n        $result = $action( $_POST['type'], $_POST['list'], $_POST['rank'], $_POST['id'], $_POST['title'], $_POST['year'], $_POST['image'], $_POST['review'] );\n    }\n    //saveRankedMovies\n    elseif ( isset( $_POST['type'] ) && isset( $_POST['list'] ) && isset( $_POST['movies'] ) )\n   \t{\n           $result = $action( $_POST['type'], $_POST['list'], $_POST['movies'] );\n   \t}\n    //deleteRankMovie\n\telseif ( isset( $_POST['type'] ) && isset( $_POST['list'] ) && isset( $_POST['id'] ) )\n\t{\n\t\t$result = $action( $_POST['type'], $_POST['list'], $_POST['id'] );\n\t}\n    //submitBookImage\n    elseif ( isset( $_POST['id'] ) && isset( $_POST['url'] ) )\n   \t{\n   \t\t$result = $action( $_POST['id'], $_POST['url'] );\n   \t}\n    //getGenre | getFranchise\n\telseif ( isset( $_POST['list'] ) )\n\t{\n\t\t$result = $action( $_POST['list'] );\n\t}\n    //deleteMovie\n\telseif ( isset( $_POST['id'] ) )\n\t{\n\t\t$result = $action( $_POST['id'] );\n\t}\n    //getGenres | downloadAll | viewSearches\n\telse\n\t{\n\t\t$result = $action();\n\t}\n\n\techo json_encode( $result );\n}\n?>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/php/enter.php b/src/php/enter.php
--- a/src/php/enter.php	(revision 4789a5c50b72792095e6d10ee7903de14b6c6e45)
+++ b/src/php/enter.php	(date 1652912908198)
@@ -206,6 +206,13 @@
     fclose( $file );
 }
 
+function updateMovieImages( $type )
+{
+    $file = fopen( getPath( "book-images.csv" ), "a" );
+    fputcsv( $file, array( $id, $url ) );
+    fclose( $file );
+}
+
 
 /********************DOWNLOAD********************/
 
@@ -277,6 +284,11 @@
    	{
    		$result = $action( $_POST['id'], $_POST['url'] );
    	}
+    //updateMovieImages
+	elseif ( isset( $_POST['type'] ) )
+	{
+		$result = $action( $_POST['type'] );
+	}
     //getGenre | getFranchise
 	elseif ( isset( $_POST['list'] ) )
 	{
Index: src/javascript/enter.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var enterMediaType;\nvar enterMovieType;\nvar isOverwrite;\n\nvar genres = [];\nvar rankList = [];\n\nfunction setMediaType( mediaType )\n{\n    enterMediaType = mediaType;\n    if ( mediaType === \"movie\" )\n    {\n        $('#movieInputs').show();\n        $('#movieTypeButtons').show();\n        $('#delete').show();\n\n        $('#addImage').hide();\n    }\n    else\n    {\n        $('#addImage').show();\n\n        $('#movieInputs').hide();\n        $('#movieTypeButtons').hide();\n        $('#delete').hide();\n    }\n\n    clear();\n}\n\nfunction isMovie()\n{\n    return enterMediaType === \"movie\";\n}\n\nfunction getByMediaType( movieValue, bookValue )\n{\n    var result = null;\n    switch ( enterMediaType ) {\n        case \"movie\":\n            result = movieValue;\n            break;\n        case \"book\":\n            result = bookValue;\n    }\n    return result;\n}\n\nfunction setMovieType( movieType )\n{\n    enterMovieType = movieType;\n    var id = $('#id').val();\n    clear();\n    findMovie( id, enterMovieType, findMediaCallback );\n\n    if ( isFullList() )\n    {\n        $('#rating').show();\n        $('#list').hide();\n        setIndexRankHandlers( false );\n    }\n    else\n    {\n        $('#rating').hide();\n        $('#list').show();\n        $('#list').attr( \"placeholder\", isFranchiseList() ? \"Franchise\" : \"Genre\" );\n        setIndexRankHandlers( true );\n    }\n}\n\nfunction isFullList()\n{\n    return enterMovieType === \"full\";\n}\n\nfunction isGenreList()\n{\n    return enterMovieType === \"genre\";\n}\n\nfunction isFranchiseList()\n{\n    return enterMovieType === \"franchise\";\n}\n\nfunction getByMovieType( fullValue, genreValue, franchiseValue )\n{\n    var result = null;\n    switch ( enterMovieType ) {\n        case \"full\":\n            result = fullValue;\n            break;\n        case \"genre\":\n            result = genreValue;\n            break;\n        case \"franchise\":\n            result = franchiseValue;\n    }\n    return result;\n}\n\n\n/********************FIND********************/\n\n\nfunction findMediaOnEnter( e )\n{\n    if ( e.which === 13 || e.keyCode === 13 )\n    {\n        var value = $('#title').val();\n        if ( value )\n        {\n            if ( isMovie() )\n            {\n                findMovie( value, enterMovieType, findMediaCallback );\n            }\n            else\n            {\n                findBook( value, findMediaCallback );\n            }\n        }\n        else\n        {\n            clear();\n        }\n    }\n}\n\nfunction findMediaCallback( response )\n{\n    if ( response && response.isSuccess )\n    {\n        if ( response.isSearchId )\n        {\n            fillData( response );\n        }\n        else\n        {\n            confirmMatch( response );\n        }\n    }\n    else\n    {\n        showToaster( \"No \" + getByMediaType( \"movie\", \"book\" ) + \" found.\" );\n        clear();\n    }\n}\n\nfunction confirmMatch( response )\n{\n    var title     = getByMediaType( \"Movie Match\", \"Library Look-up\" );\n    var term      = getByMediaType( \"movie\", \"book\" );\n    var info      = getByMediaType( \"ID: \" + response.id, response.author );\n    var imageAlt  = getByMediaType( \"Movie Poster\", \"Book Cover\" );\n\n    var innerHTML = \"Is this the correct \" + term + \"?<br/><br/>\" +\n                    \"<strong>\" + response.title + \"</strong> (\" + response.year + \")<br/>\" +\n                    info + \"<br/><br/>\" +\n                    \"<img src='\" + response.image + \"' height='300px' alt='\" + imageAlt + \"'>\";\n\n    showConfirm( title, innerHTML, function( answer ) {\n        ( answer ) ? fillData( response ) : showToaster( \"Try entering \" + getByMediaType( \"IMDB\", \"GoodReads\" ) + \" ID.\" );\n    });\n}\n\n//ARCHIVE\n// function promptGoogle( search )\n// {\n//     var db = isMovie() ? \"IMDB\" : \"GoodReads\";\n//     var html = \"Try finding the ID here: <a class='link' href='https://www.google.com/search?q=\" + db + \"%20\" + search + \"'>Google</a><br/>Then enter ID:\";\n//     showPrompt( \"Enter ID\", html, autoFillById, \"tt0082971\", true );\n// }\n\nfunction fillData( response )\n{\n    clear();\n    $('#title').val( response.title );\n    $('#year').val( response.year );\n\n    $('#rating').val( response.rating );\n    $('#review').val( response.review );\n    $('#index').val( response.index );\n\n    var list = isFullList() ? \"\" : getRankListName( response.list );\n    $('#list').val( list );\n    $('#id').val( response.id );\n    $('#image').val( response.image );\n\n    isOverwrite = response.isPreviouslyReviewed;\n    if ( isOverwrite )\n    {\n        if ( !isFullList() )\n        {\n            setRankList( response.list );\n        }\n    }\n    else\n    {\n        showToaster( getByMediaType( \"Movie\", \"Book\" ) + \" not previously reviewed.\" );\n    }\n}\n\nfunction setRankList( list )\n{\n    $.post(\n        \"php/enter.php\",\n        {\n            action: \"get\" + (isGenreList() ? \"Genre\" : \"Franchise\"),\n            list:   list\n        },\n        function ( response ) {\n            rankList = JSON.parse( response );\n        }\n    );\n}\n\nfunction clear()\n{\n    $('#title').val( \"\" );\n    $('#year').val( \"\" );\n    $('#index').val( \"\" );\n    $('#rating').val( \"\" );\n    $('#review').val( \"\" );\n    $('#id').val( \"\" );\n    $('#list').val( \"\" );\n    $('#image').val( \"\" );\n    isOverwrite = null;\n    rankList = null;\n}\n\n\n/*********************SUBMIT*********************/\n\n\nfunction submit()\n{\n    if ( isMovie() )\n    {\n        checkSubmit();\n    }\n    else\n    {\n        checkBookSubmit();\n    }\n}\n\n\n/*********************MOVIE**********************/\n\n\nfunction checkSubmit()\n{\n    var submit = getByMovieType( submitMovie, submitRank, submitRank );\n    if ( validate() )\n    {\n        if ( isOverwrite )\n        {\n            var term = isFullList() ? \"rated\" : \"ranked\";\n            showConfirm( \"Entry Exists\", \"This movie has already been \" + term + \". Overwrite?\", function( answer ) {\n                if ( answer )\n                {\n                    submit();\n                }\n            });\n        }\n        else\n        {\n            submit();\n        }\n    }\n}\n\nfunction validate()\n{\n    var result = true;\n\n    var id = $('#id').val();\n    var year = $('#year').val();\n    var rating = $('#rating').val();\n    var list = $('#list').val();\n    var rank = $('#index').val();\n\n    if ( !id )\n    {\n        result = false;\n        showToaster( \"No movie ID present.\" );\n    }\n    else if ( !year )\n    {\n        result = false;\n        showToaster( \"No year present.\" );\n    }\n    else if ( isFullList() )\n    {\n        if ( !rating )\n        {\n            result = false;\n            showToaster( \"No rating present.\" );\n        }\n    }\n    else\n    {\n        if ( !list )\n        {\n            result = false;\n            showToaster( \"No list type present.\" );\n        }\n        else if ( !rank )\n        {\n            result = false;\n            showToaster( \"No rank present.\" );\n        }\n    }\n\n    return result;\n}\n\nfunction submitMovie()\n{\n    $.post(\n        \"php/enter.php\",\n        {\n            action: \"saveMovie\",\n            index:  $('#index').val(),\n            title:  $('#title').val(),\n            id:     $('#id').val(),\n            year:   $('#year').val(),\n            rating: $('#rating').val(),\n            review: $('#review').val() || \"***\",\n            overwrite: isOverwrite\n        },\n        submitCallback\n    );\n}\n\nfunction submitCallback( response )\n{\n    clear();\n    showToaster( \"Success!\" );\n}\n\n\n/**********************RANK**********************/\n//Genres and Franchise\n\n\nfunction populateGenres()\n{\n    $.post(\n        \"php/enter.php\",\n        { action: \"getGenres\" },\n        function( response ) {\n            genres = JSON.parse( response );\n        }\n    );\n}\n\nfunction setIndexRankHandlers( getListModal )\n{\n    var index = $('#index');\n    index.attr( \"placeholder\", getListModal ? \"Click to change Rank\" : \"Index\" );\n    if ( getListModal )\n    {\n        index.click( getRanking );\n        index.keypress( getRanking );\n    }\n    else\n    {\n        index.unbind( \"click\", getRanking );\n        index.unbind( \"keypress\", getRanking );\n    }\n}\n\nfunction getRanking()\n{\n    if ( rankList )\n    {\n        var id = $('#id').val();\n        if ( id && !rankList.some( m => m.id === id ) )\n        {\n            rankList.push( {\n                id:     id,\n                title:  $('#title').val(),\n                image:  $('#image').val()\n            } );\n        }\n\n        openSortModal( rankList, getRankingCallback, true );\n    }\n    else\n    {\n        if ( isGenreList() && genres )\n        {\n            openGenreModal(\n                genres,\n                function( listName, response ) {\n                    $('#list').val( getRankListName( listName ) );\n                    rankList = response;\n                    getRanking();\n                },\n                true\n            );\n        }\n        else if ( isFranchiseList() )\n        {\n            openFranchiseModal( function( listName, response ) {\n                $('#list').val( getRankListName( listName ) );\n                rankList = response;\n                getRanking();\n            } );\n        }\n    }\n}\n\nfunction getRankingCallback( response )\n{\n    var mainIndex = response.indexOf( $('#title').val() );\n    var changed = false;\n    rankList.sort(function( a, b ){\n        var result = response.indexOf(a.title) - response.indexOf(b.title);\n        changed = changed || result < 0;\n        return result;\n    });\n    if ( mainIndex >= 0 )\n    {\n        $('#index').val( mainIndex + 1 );\n    }\n\n    if ( changed )\n    {\n        submitRanks();\n    }\n}\n\nfunction submitRanks()\n{\n    $.post(\n        \"php/enter.php\",\n        {\n            action: \"saveRankedMovies\",\n            type:   enterMovieType,\n            list:   getRankListId( $('#list').val() ),\n            movies: rankList\n        },\n        function() {\n            showToaster( \"Ranks updated.\" );\n            if ( isFranchiseList() )\n            {\n                updatePersonalRankings();\n            }\n        }\n    );\n}\n\nfunction updatePersonalRankings() //used for Averages\n{\n    $.post(\n        \"php/database.php\",\n        {\n            action: \"updatePersonalRankings\",\n            list:   getRankListId( $('#list').val() ),\n            movies: rankList\n        }\n    );\n}\n\nfunction submitRank()\n{\n    $.post(\n        \"php/enter.php\",\n        {\n            action: \"saveRankedMovie\",\n            type:   enterMovieType,\n            list:   getRankListId( $('#list').val() ),\n            rank:   $('#index').val(),\n            title:  $('#title').val(),\n            id:     $('#id').val(),\n            year:   $('#year').val(),\n            image:  $('#image').val(),\n            review: $('#review').val() || \"***\"\n        },\n        submitCallback\n    );\n}\n\nfunction getRankListId( list )\n{\n    var result;\n\n    if ( isGenreList() )\n    {\n        var genre = (genres) ? genres.find( genre => genre.title === list ) : null;\n        result = (genre) ? genre.id : list;\n    }\n    else\n    {\n        result = getRankListName( list );\n        result = (result === \"Star Wars\") ? \"StarWars\" : result;\n    }\n\n    return result;\n}\n\nfunction getRankListName( list )\n{\n    var result;\n\n    if ( isGenreList() )\n    {\n        var genre = (genres) ? genres.find( genre => genre.id === list ) : null;\n        result = (genre) ? genre.title : list;\n    }\n    else\n    {\n        list = (list) ? list.toLowerCase() : \"\";\n        switch ( list )\n        {\n        case \"d\":\n        case \"disney\":\n            result = \"Disney\";\n            break;\n        case \"m\":\n        case \"mcu\":\n        case \"marvel\":\n            result = \"Marvel\";\n            break;\n        case \"s\":\n        case \"sw\":\n        case \"starwars\":\n        case \"star wars\":\n            result = \"Star Wars\";\n        }\n    }\n\n    return result;\n}\n\n\n/*********************GENRE**********************/\n\n\n// test when genre is entered that doesn't exist\n// function editGenres()\n// {\n//     var genreText = genreNames.join('\\n');\n//     showBigPrompt(\n//         \"Edit Genres\",\n//         \"Choose genreNames to appear on main page:\",\n//         editGenresCallback,\n//         genreText );\n// }\n//\n// function editGenresCallback( response )\n// {\n//     genreNames = response.split('\\n').map( movie => { return {id: movie.trim(), title: movie.trim() }; } ).filter( Boolean );\n//     $.post(\n//         \"php/enter.php\",\n//         {\n//             action: \"\",\n//             type:   null\n//         },\n//         null\n//     );\n// }\n\n\n/*********************DELETE********************/\n\n\nfunction checkDelete()\n{\n    if ( $('#id').val() )\n    {\n        var innerHTML = \"Are you sure you would like to delete this movie?<br/><br/>\" +\n                        \"<strong>\" + $('#title').val() + \"</strong> (\" + $('#year').val() + \")<br/>\" +\n                        \"(\" + $('#id').val() + \")<br/><br/>\" +\n                        \"<img src='\" + $('#image').val() + \"' height='300px' alt='Movie Poster'>\";\n        showConfirm( \"Delete Movie\", innerHTML, function( answer ) {\n            if ( answer )\n            {\n                deleteMovie();\n            }\n        });\n    }\n    else\n    {\n        showToaster( \"No movie ID present.\" );\n    }\n}\n\nfunction deleteMovie()\n{\n    var data = isFullList() ?\n        {\n            action: \"deleteMovie\",\n            id:     $('#id').val()\n        } :\n        {\n            action: \"deleteRankMovie\",\n            type:   enterMovieType,\n            list:   getRankListId( $('#list').val() ),\n            id:     $('#id').val()\n        };\n\n    $.post(\n        \"php/enter.php\",\n        data,\n        function( response ) {\n            response = JSON.parse( response );\n            var success = ( response && response.isSuccess );\n            showToaster( success ? \"Movie removed.\" : \"Movie not found.\" );\n            if ( success )\n            {\n                clear();\n            }\n        }\n    );\n}\n\n\n/*********************BOOK***********************/\n\n\nfunction checkBookSubmit()\n{\n    if ( $('#id').val() )\n    {\n        submitBook();\n    }\n    else\n    {\n        showToaster( \"No book ID present.\" );\n    }\n}\n\nfunction submitBook()\n{\n    document.getElementById(\"review\").select();\n    document.execCommand(\"copy\");\n    showToaster( \"Review copied to clipboard\" );\n\n    if ( isOverwrite )\n    {\n        window.open( \"https://www.goodreads.com/review/edit/\" + $('#id').val() );\n    }\n    else\n    {\n        window.open( \"https://www.goodreads.com/review/list/55277264-daniel-crouch?utf8=%E2%9C%93&search%5Bquery%5D=\" + $('#title').val() );\n    }\n\n    clear();\n}\n\n\n/*********************IMAGE**********************/\n\n\nfunction addImage()\n{\n    if ( $('#id').val() )\n    {\n        var url = $('#review').val();\n        var isImage = url.match(/\\.(jpeg|jpg|gif|png)$/) != null &&\n            url.startsWith(\"http\") &&\n            !url.includes(\" \");\n\n        if (!isImage)\n        {\n            showPrompt(\n                \"Enter Image URL\",\n                \"Enter an image URL to use for this book:\",\n                function ( response ) { response ? submitImage( response ) : null; },\n                \"\",\n                true\n            );\n        }\n        else\n        {\n            submitImage( url );\n        }\n    }\n    else\n    {\n        showToaster( \"No book ID present.\" );\n    }\n}\n\nfunction submitImage( url )\n{\n    $.post(\n        \"php/enter.php\",\n        {\n            action: \"submitBookImage\",\n            id:     $('#id').val(),\n            url:    url\n        },\n        submitCallback\n    );\n}\n\n\n/********************DOWNLOAD********************/\n\n\nfunction view()\n{\n    showBinaryChoice(\n        \"Download\",\n        \"Download Ratings or View To-Watch List?\", \"Download All\", \"View Searches\",\n        function( answer ) {\n            if ( answer )\n            {\n                download();\n            }\n            else\n            {\n                viewSearches();\n            }\n        }\n    );\n}\n\nfunction viewSearches()\n{\n    $.post(\n        \"php/enter.php\",\n        {action: \"viewSearches\"},\n        function( response ) {\n            showMessage( \"User Searches\", JSON.parse( response ) );\n        }\n    );\n}\n\nfunction download()\n{\n    var downloadForm = document.createElement('FORM');\n    downloadForm.name='downloadForm';\n    downloadForm.method='POST';\n    downloadForm.action='php/enter.php';\n\n    var formAction = document.createElement('INPUT');\n    formAction.type='HIDDEN';\n    formAction.name='action';\n    formAction.value='downloadAll';\n    downloadForm.appendChild( formAction );\n\n    document.body.appendChild( downloadForm );\n    downloadForm.submit();\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/javascript/enter.js b/src/javascript/enter.js
--- a/src/javascript/enter.js	(revision 4789a5c50b72792095e6d10ee7903de14b6c6e45)
+++ b/src/javascript/enter.js	(date 1652912908219)
@@ -18,6 +18,7 @@
     }
     else
     {
+        $('#updateImages').hide();
         $('#addImage').show();
 
         $('#movieInputs').hide();
@@ -57,6 +58,7 @@
     {
         $('#rating').show();
         $('#list').hide();
+        $('#updateImages').hide();
         setIndexRankHandlers( false );
     }
     else
@@ -64,6 +66,7 @@
         $('#rating').hide();
         $('#list').show();
         $('#list').attr( "placeholder", isFranchiseList() ? "Franchise" : "Genre" );
+        $('#updateImages').show();
         setIndexRankHandlers( true );
     }
 }
@@ -697,6 +700,30 @@
         submitCallback
     );
 }
+
+function updateImages()
+{
+    if ( enterMediaType === "movie" && !isFullList() )
+    {
+        updateMovieImages( enterMovieType );
+    }
+    else
+    {
+        showToaster( "Can only update images for Genres or Series." );
+    }
+}
+
+function updateMovieImages( movieType )
+{
+    $.post(
+        "php/enter.php",
+        {
+            action: "updateMovieImages",
+            type:   movieType,
+        },
+        submitCallback
+    );
+}
 
 
 /********************DOWNLOAD********************/
